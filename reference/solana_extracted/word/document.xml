<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<w:document xmlns:wpc="http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas" xmlns:cx="http://schemas.microsoft.com/office/drawing/2014/chartex" xmlns:cx1="http://schemas.microsoft.com/office/drawing/2015/9/8/chartex" xmlns:cx2="http://schemas.microsoft.com/office/drawing/2015/10/21/chartex" xmlns:cx3="http://schemas.microsoft.com/office/drawing/2016/5/9/chartex" xmlns:cx4="http://schemas.microsoft.com/office/drawing/2016/5/10/chartex" xmlns:cx5="http://schemas.microsoft.com/office/drawing/2016/5/11/chartex" xmlns:cx6="http://schemas.microsoft.com/office/drawing/2016/5/12/chartex" xmlns:cx7="http://schemas.microsoft.com/office/drawing/2016/5/13/chartex" xmlns:cx8="http://schemas.microsoft.com/office/drawing/2016/5/14/chartex" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:aink="http://schemas.microsoft.com/office/drawing/2016/ink" xmlns:am3d="http://schemas.microsoft.com/office/drawing/2017/model3d" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:oel="http://schemas.microsoft.com/office/2019/extlst" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp14="http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:w14="http://schemas.microsoft.com/office/word/2010/wordml" xmlns:w15="http://schemas.microsoft.com/office/word/2012/wordml" xmlns:w16cex="http://schemas.microsoft.com/office/word/2018/wordml/cex" xmlns:w16cid="http://schemas.microsoft.com/office/word/2016/wordml/cid" xmlns:w16="http://schemas.microsoft.com/office/word/2018/wordml" xmlns:w16du="http://schemas.microsoft.com/office/word/2023/wordml/word16du" xmlns:w16sdtdh="http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash" xmlns:w16sdtfl="http://schemas.microsoft.com/office/word/2024/wordml/sdtformatlock" xmlns:w16se="http://schemas.microsoft.com/office/word/2015/wordml/symex" xmlns:wpg="http://schemas.microsoft.com/office/word/2010/wordprocessingGroup" xmlns:wpi="http://schemas.microsoft.com/office/word/2010/wordprocessingInk" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml" xmlns:wps="http://schemas.microsoft.com/office/word/2010/wordprocessingShape" mc:Ignorable="w14 w15 w16se w16cid w16 w16cex w16sdtdh w16sdtfl w16du wp14"><w:body><w:p w14:paraId="34FCBDDB" w14:textId="3E519F46" w:rsidR="009D27EE" w:rsidRDefault="008C43EC"><w:r><w:t>Quiz – impact campaign – game flow</w:t></w:r><w:r w:rsidR="00545D85"><w:t xml:space="preserve"> </w:t></w:r></w:p><w:p w14:paraId="1E2CF6D9" w14:textId="77777777" w:rsidR="008C43EC" w:rsidRDefault="008C43EC"/><w:p w14:paraId="79C08460" w14:textId="70C89B37" w:rsidR="008C43EC" w:rsidRDefault="008C43EC"><w:r w:rsidRPr="008C43EC"><w:t>Here is the actual game flow</w:t></w:r><w:r w:rsidR="00545D85"><w:t xml:space="preserve"> in a total brain dump.</w:t></w:r></w:p><w:p w14:paraId="41375939" w14:textId="77777777" w:rsidR="008C43EC" w:rsidRDefault="008C43EC"><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> A host sets up a room and </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="008C43EC"><w:t>send</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> the contract the room id and the fee and the fee token </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="008C43EC"><w:t>( on</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> sol this will be </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="008C43EC"><w:t>sol</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="008C43EC"><w:t>usdc</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> or </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="008C43EC"><w:t>pysud</w:t></w:r><w:proofErr w:type="spellEnd"/><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="008C43EC"><w:t>. )</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> the host then also select the prize method, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="008C43EC"><w:t>its</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> is either % of pool or they add other assets. these other assets must be </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>escrowed</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> to the contract before players can join. if they select prize pool the contract works like this 20% platform fees (to our wallet) a min of 40% to the charity and the host controls the other 40%. from the host controlled 40% they can take 5% for themselves (host payment options) and then 40% - host payment for the prizes, if the host does not use the 40% so say 0 for host 20% for prizes, then the balance also goes to the </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>charity</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">, so the </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>charity</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> will get 60% in that case. the host will decide on the </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>charity</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> and the charity wallet address will be provided by the host. in </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>addition</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> to this, if they select the pool they must also </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>decide</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> how much of that they need for 1st, 2nd and third </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>place</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> (these must make up 100% but </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>it’s</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> a 100% of the prize, not the total pool so if they prize was 20% of the total pool 100% of that must be used for prizes</w:t></w:r><w:r><w:t xml:space="preserve">)  </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">on stellar this was </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="008C43EC"><w:t>init_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> room. </w:t></w:r><w:r><w:br/></w:r><w:r><w:br/></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">For </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="008C43EC"><w:t>init_asset_room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">, the host sets up the room with the fee token, the fee, the </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>charity</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">, and they control 5% of the room intake which they can optionally pay to </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>themselves</w:t></w:r><w:r><w:t xml:space="preserve">. </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">if </w:t></w:r><w:r><w:t xml:space="preserve">the do not pay </w:t></w:r><w:proofErr w:type="spellStart"/><w:r><w:t>them selves</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r><w:t xml:space="preserve"> 5% then</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> its 20% platform 80% charity or 20% platform, 80%</w:t></w:r><w:r><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>less host payment up to 5% to charity</w:t></w:r><w:r><w:t xml:space="preserve">. </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> the </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>charity</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> wallet is supplied</w:t></w:r><w:r><w:t xml:space="preserve"> by the front end</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">. they also tell the contract what assets </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>1st p</w:t></w:r><w:r><w:t>lace</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> will be</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">, 2nd and third. only after they add the assets to the contract can players join. </w:t></w:r></w:p><w:p w14:paraId="1EC6C61B" w14:textId="72AFFF47" w:rsidR="008C43EC" w:rsidRDefault="008C43EC"><w:r><w:t>F</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">or a player to join the room the must pay the fee , but we have extras, so the min the can pay is the fee, anything extra is classed as extras they purchases ( these actual extras </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>don’t</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> need to be in the contract, just the full payment amount split by fee and extras) game logic is not in the contract. when the game is over, </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>prizes</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> are distributed, the host gives the winning wallets and the prizes are distributed, platform fee and charity amount so the room value goes to 0. the front end will send the winning wallets. the platform fee wallet will be hardcoded in the contract.</w:t></w:r><w:r><w:br/></w:r><w:r><w:br/></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> for the </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="008C43EC"><w:t>chairy</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> funds, on stellar we were sending this to a treasury contract as we are using the giving block for </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="008C43EC"><w:t>chairy</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> distributions, and they are on </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="008C43EC"><w:t>evm</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">, so we need to bridge, the idea was with a </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>separate</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> contract we can batch bridge to reduce fees so we need to know what charity, </w:t></w:r><w:r><w:t xml:space="preserve"> we used a</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> memo when sending the funds to the treasury contract, this treasury contract address </w:t></w:r><w:r><w:t>was</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> hardcoded into the game contract and we need a </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>separate</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> contact for this, </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>which</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> I never got done on stellar. </w:t></w:r><w:r><w:br/></w:r><w:r><w:br/><w:t xml:space="preserve">The Giving block is supported on </w:t></w:r><w:proofErr w:type="spellStart"/><w:r><w:t>solana</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r><w:t xml:space="preserve">, so we don’t need a treasury contract.  Instead on prize distribution, this address will also be fed to the contract.  We need our quiz app to do some </w:t></w:r><w:proofErr w:type="gramStart"/><w:r><w:t>back end</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r><w:t xml:space="preserve"> work here, so the user will select the charity by name in our front </w:t></w:r><w:proofErr w:type="gramStart"/><w:r><w:t>end</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r><w:t xml:space="preserve"> and our back end will</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> call</w:t></w:r><w:r><w:t xml:space="preserve"> the giving </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t>blocks</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> Public API to fetch the org and get/prepare a donation addres</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">s and this is the charity address to be used.  </w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">On </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="008C43EC"><w:t>end_room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve">, your program transfers the charity share directly to the stored </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="008C43EC"><w:t>T</w:t></w:r><w:r><w:t>he</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r><w:t xml:space="preserve"> giving blocks</w:t></w:r><w:r w:rsidRPr="008C43EC"><w:t xml:space="preserve"> address</w:t></w:r><w:r><w:t>.</w:t></w:r><w:r w:rsidR="009077FA"><w:t xml:space="preserve"> We fully need to clarify what the giving block needs.</w:t></w:r></w:p><w:p w14:paraId="7071ADCC" w14:textId="77777777" w:rsidR="00545D85" w:rsidRDefault="00545D85"/><w:p w14:paraId="3967C6CD" w14:textId="24833840" w:rsidR="00545D85" w:rsidRDefault="00545D85"><w:r><w:t xml:space="preserve">Based on this I have the following, but it might need improvement, or optimisation so it is a guide.  Maybe use </w:t></w:r><w:proofErr w:type="spellStart"/><w:r><w:t>openzeplin</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r><w:t xml:space="preserve"> for security stuff </w:t></w:r></w:p><w:p w14:paraId="462FEADC" w14:textId="77777777" w:rsidR="00545D85" w:rsidRDefault="00545D85"/><w:p w14:paraId="147B4685" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>FundRaisely</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve"> — Solana Smart Contract &amp; Backend Dev Doc (Anchor + TGB)</w:t></w:r></w:p><w:p w14:paraId="584D16D6" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t>Audience: Solana Anchor engineer + backend engineer.</w:t></w:r><w:r w:rsidRPr="00545D85"><w:br/><w:t>Goal: Build the Solana on-chain payouts contract that mirrors our working Stellar (Soroban) flow and plugs into our existing frontend calls. No bridging needed — charity payouts go directly to The Giving Block (TGB) donation address for the selected charity on Solana.</w:t></w:r></w:p><w:p w14:paraId="2071E443" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="5E9EA730"><v:rect id="_x0000_i1121" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="4C4EB3FC" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>1) Scope &amp; Principles</w:t></w:r></w:p><w:p w14:paraId="025B95A1" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="1"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>On-chain responsibilities (Solana program, Anchor):</w:t></w:r></w:p><w:p w14:paraId="0E87F51E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="1"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Create “rooms” that accept player payments in a single </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>fee mint</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (e.g., USDC).</w:t></w:r></w:p><w:p w14:paraId="10D33926" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="1"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Support </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>two prize modes</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t>:</w:t></w:r></w:p><w:p w14:paraId="12442898" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="2"/><w:numId w:val="1"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Split (pool)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: prizes are a % of the </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>prize pool</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (not total pot).</w:t></w:r></w:p><w:p w14:paraId="5BD61520" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="2"/><w:numId w:val="1"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Assets</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t>: host escrows up to 3 predeclared SPL prizes into program vaults.</w:t></w:r></w:p><w:p w14:paraId="3EF55886" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="1"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Allow players to </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>join</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (entry fee + optional extras in the same transaction).</w:t></w:r></w:p><w:p w14:paraId="6551D5BC" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="1"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>End</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> a room: atomically compute and transfer platform fee (fixed 20%), host fee (≤5%), </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>charity share (≥40%)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t>, and prizes (split or escrowed assets).</w:t></w:r></w:p><w:p w14:paraId="0F816AF6" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="1"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Recovery</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> path for abandoned rooms (admin-initiated, 90% refunds to players, 10% platform).</w:t></w:r></w:p><w:p w14:paraId="72F114CA" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="1"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Off-chain responsibilities (Backend):</w:t></w:r></w:p><w:p w14:paraId="25B776C8" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="1"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Resolve </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>charity donation address on Solana</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> via </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>The Giving Block</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (TGB) for the selected charity and asset (SOL or SPL USDC). Persist address + memo </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>before</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> room creation.</w:t></w:r></w:p><w:p w14:paraId="0A5491A1" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="1"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Optional: token allowlist management (admin surface).</w:t></w:r></w:p><w:p w14:paraId="69637F17" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="1"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Frontend status:</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> already wired to these function names; pass exact arguments below.</w:t></w:r></w:p><w:p w14:paraId="290F78A3" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="0780CABC"><v:rect id="_x0000_i1122" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="5193D28A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>2) Constants &amp; Config</w:t></w:r></w:p><w:p w14:paraId="2F00E35B" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="2"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Hard-coded (in program):</w:t></w:r></w:p><w:p w14:paraId="501EF120" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="2"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>PLATFORM_FEE_BPS = 2000 (20%)</w:t></w:r></w:p><w:p w14:paraId="4E153503" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="2"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>HOST_FEE_MAX_BPS = 500 (≤5%)</w:t></w:r></w:p><w:p w14:paraId="1E9F8C82" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="2"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>HOST_CONTROLLED_MAX_BPS = 4000 (</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_fee_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> + </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> ≤ 40%)</w:t></w:r></w:p><w:p w14:paraId="69DE1796" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="2"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>CHARITY_MIN_BPS = 4000 (≥40%)</w:t></w:r></w:p><w:p w14:paraId="083BD6D2" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="2"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">PLATFORM_WALLET: </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>Pubkey</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> = &lt;YOUR_PLATFORM_PUBKEY&gt; ← put behind a feature gate if needed.</w:t></w:r></w:p><w:p w14:paraId="7AACFD65" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="2"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Program design: SPL-only path</w:t></w:r><w:r w:rsidRPr="00545D85"><w:br/><w:t xml:space="preserve">Prefer SPL tokens (e.g., USDC). If SOL is needed, use </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>wSOL</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> so all transfers go via SPL Token Program (single code path).</w:t></w:r></w:p><w:p w14:paraId="5981F3FE" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="72EE5028"><v:rect id="_x0000_i1123" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="697A2B1E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>3) Accounts, PDAs &amp; State</w:t></w:r></w:p><w:p w14:paraId="0ED5018E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>3.1 PDAs</w:t></w:r></w:p><w:p w14:paraId="1CA96E65" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="3"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Room PDA: ["room", host, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>]</w:t></w:r></w:p><w:p w14:paraId="2AFCC8F2" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="3"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>TreasuryVault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> ATA: ["</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>treasury_vault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">", room, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>] (program-owned)</w:t></w:r></w:p><w:p w14:paraId="3EB5C4DB" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="3"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>PrizeVault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>[</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>i</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>] ATA: ["</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_vault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">", room, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>i</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">] (asset mode; </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>i</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:rFonts w:ascii="Cambria Math" w:hAnsi="Cambria Math" w:cs="Cambria Math"/></w:rPr><w:t>∈</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> {0,1,2})</w:t></w:r></w:p><w:p w14:paraId="5E4DD056" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="3"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Optional Receipt PDA: ["receipt", room, player] (join record)</w:t></w:r></w:p><w:p w14:paraId="6A3E57B8" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="3"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>TokenRegistry</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> PDA (global allowlist): ["</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>token_registry</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>"]</w:t></w:r></w:p><w:p w14:paraId="74B81DEF" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Ownership: vault ATAs must be owned by a program-derived </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room authority PDA</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> so only program logic moves funds.</w:t></w:r></w:p><w:p w14:paraId="56614FD6" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>3.2 State</w:t></w:r></w:p><w:p w14:paraId="6E40A1E0" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>enum</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>PrizeMode</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>{ Split</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> = 0, Assets = </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>1 }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="408F061C" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>enum</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>RoomStatus</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>AwaitingFunding</w:t></w:r><w:proofErr w:type="spellEnd"/><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">=0, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>PartiallyFunded</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>=1, Ready=2, Active=3, Ended=</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>4 }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="49EA4433" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"/><w:p w14:paraId="3B47452D" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>pub</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> struct Room {</w:t></w:r></w:p><w:p w14:paraId="3835915C" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  // Identity</w:t></w:r></w:p><w:p w14:paraId="7A16513B" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: String,</w:t></w:r></w:p><w:p w14:paraId="45374A55" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub host: </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>Pubkey</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>,</w:t></w:r></w:p><w:p w14:paraId="752B6921" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"/><w:p w14:paraId="1D6D176B" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  // Currency</w:t></w:r></w:p><w:p w14:paraId="7D28243B" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: </w:t></w:r><w:proofErr w:type="spellStart"/><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>Pubkey</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">,   </w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">   // SPL mint used for joins and non-asset payouts</w:t></w:r></w:p><w:p w14:paraId="0802ECC3" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>entry_fee</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: u64,</w:t></w:r></w:p><w:p w14:paraId="7341BC18" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"/><w:p w14:paraId="3BD9DAF5" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  // Splits (bp = basis points over 10_000)</w:t></w:r></w:p><w:p w14:paraId="2FB1B4C2" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_fee_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: u</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">16,   </w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  // </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>0..</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>=500</w:t></w:r></w:p><w:p w14:paraId="4F704274" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: u</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">16,   </w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">// with </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_fee_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> &lt;= 4000 total</w:t></w:r></w:p><w:p w14:paraId="20B23D06" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"/><w:p w14:paraId="70DBE3B2" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  // Mode &amp; distribution</w:t></w:r></w:p><w:p w14:paraId="3EBB1FAC" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_mode</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: u</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">8,   </w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">     // 0=Split, 1=Assets</w:t></w:r></w:p><w:p w14:paraId="2BBAD4A4" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_distribution_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: [u16; 3], // sum=10000 (100% of prize pool) if Split</w:t></w:r></w:p><w:p w14:paraId="397C522C" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"/><w:p w14:paraId="71693D78" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  // Charity (resolved by backend from TGB)</w:t></w:r></w:p><w:p w14:paraId="6D681C7A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_wallet</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>Pubkey</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, // TGB donation address on Solana for </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/></w:p><w:p w14:paraId="4E196623" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_memo</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">String,   </w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>// optional memo for reconciliation</w:t></w:r></w:p><w:p w14:paraId="3F702342" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"/><w:p w14:paraId="4C056CF3" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  // Lifecycle</w:t></w:r></w:p><w:p w14:paraId="0731752E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub status: u</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">8,   </w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">          // </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>RoomStatus</w:t></w:r><w:proofErr w:type="spellEnd"/></w:p><w:p w14:paraId="0F692375" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub ended: bool,</w:t></w:r></w:p><w:p w14:paraId="4F81E664" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"/><w:p w14:paraId="45706E95" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  // Accounting</w:t></w:r></w:p><w:p w14:paraId="054F2552" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: u64,</w:t></w:r></w:p><w:p w14:paraId="48577070" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_entry_fees</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: u64,</w:t></w:r></w:p><w:p w14:paraId="5D81549F" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_extras_fees</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: u64,</w:t></w:r></w:p><w:p w14:paraId="45985318" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>player_count</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: u32,</w:t></w:r></w:p><w:p w14:paraId="7FB898CE" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"/><w:p w14:paraId="67CB15EA" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  // Winners (filled before </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>end_room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>)</w:t></w:r></w:p><w:p w14:paraId="75148E3E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub winners: [Option&lt;</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>Pubkey</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>&gt;; 3],</w:t></w:r></w:p><w:p w14:paraId="30A1D15E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"/><w:p w14:paraId="4AE9CBE7" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  // Ops</w:t></w:r></w:p><w:p w14:paraId="06404512" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub paused: bool,</w:t></w:r></w:p><w:p w14:paraId="6AA68972" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">  pub </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>recovery_started_at_slot</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: Option&lt;u64&gt;,</w:t></w:r></w:p><w:p w14:paraId="11F3C650" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t>}</w:t></w:r></w:p><w:p w14:paraId="500BB41E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="3B8601C6"><v:rect id="_x0000_i1124" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="6C09C08E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>4) Instruction Set (Anchor) — names match frontend calls</w:t></w:r></w:p><w:p w14:paraId="4D2D09BC" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t>Below: function signatures (conceptual), required accounts, and key validations.</w:t></w:r></w:p><w:p w14:paraId="53DB5EC4" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>4.1 Admin / Registry</w:t></w:r></w:p><w:p w14:paraId="21CF6D81" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>initialize(</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">admin, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>platform_wallet</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:br/><w:t xml:space="preserve">Create </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>token_registry</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>, set admin, set global flags.</w:t></w:r></w:p><w:p w14:paraId="2DA8C1B6" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="4"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Accounts: admin (signer), </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>token_registry</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (PDA </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>init</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">), </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>system_program</w:t></w:r><w:proofErr w:type="spellEnd"/></w:p><w:p w14:paraId="3E1C2069" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="4"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>Behavior</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: initialize once.</w:t></w:r></w:p><w:p w14:paraId="581425F3" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>add_approved_token</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">(mint) / </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>remove_approved_token</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>(mint)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (admin)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:br/><w:t>Toggle fee mints.</w:t></w:r></w:p><w:p w14:paraId="1800B1E6" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="5"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Accounts: admin (signer), </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>token_registry</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (mut), mint</w:t></w:r></w:p><w:p w14:paraId="6DB57721" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="5"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>Behavior</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: maintain allowlist for </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="65A81E21" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>pause(</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">) / </w:t></w:r><w:proofErr w:type="spellStart"/><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>unpause</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>(</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (admin)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:br/><w:t>Global switch on registry; or add per-room pause if desired.</w:t></w:r></w:p><w:p w14:paraId="7D98BC9D" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="1EFECA7F"><v:rect id="_x0000_i1125" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="6788D110" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>4.2 Room Lifecycle</w:t></w:r></w:p><w:p w14:paraId="06C940BC" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>init_pool_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>entry_fee</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>host_fee_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>?,</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>prize_pool_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>dist_first</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>dist_second</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>dist_third</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>charity_wallet</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>charity_memo</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>)</w:t></w:r></w:p><w:p w14:paraId="71C531AE" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="6"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Accounts:</w:t></w:r></w:p><w:p w14:paraId="350FC1B2" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="6"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>host (signer)</w:t></w:r></w:p><w:p w14:paraId="38868947" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="6"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">room (PDA </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>init</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>)</w:t></w:r></w:p><w:p w14:paraId="1C4D4ACD" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="6"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>treasury_vault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (ATA </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>init</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> for </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> owned by program authority)</w:t></w:r></w:p><w:p w14:paraId="5C3B646D" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="6"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>token_registry</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/></w:p><w:p w14:paraId="6D888E26" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="6"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>system_program</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>token_program</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>associated_token_program</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>, rent</w:t></w:r></w:p><w:p w14:paraId="2AC23EDE" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="6"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Validations:</w:t></w:r></w:p><w:p w14:paraId="78F2963F" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="6"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> enabled in registry; </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>entry_fee</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> &gt; 0</w:t></w:r></w:p><w:p w14:paraId="0D7AF9A8" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="6"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_fee_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> &lt;= 500</w:t></w:r></w:p><w:p w14:paraId="41C864CB" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="6"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_fee_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> + </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> &lt;= 4000</w:t></w:r></w:p><w:p w14:paraId="3FCF9384" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="6"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>implied charity = 10000 - 2000 - (</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_fee_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> + </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>) &gt;= 4000</w:t></w:r></w:p><w:p w14:paraId="195B0BA4" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="6"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>dist_first</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> + </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>dist_second</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> + </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>dist_third</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> == 10000 (any can be 0)</w:t></w:r></w:p><w:p w14:paraId="54DA6081" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="6"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Effects:</w:t></w:r></w:p><w:p w14:paraId="58B50B1B" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="6"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Write Room </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_mode</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">=Split, status=Ready, </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>... }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="3477E745" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="6"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Emit </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>RoomCreated</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="76F02172" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>init_asset_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>entry_fee</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>host_fee_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>?,</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>expected_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>prizes</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>[</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">(mint, amount) up to 3], </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>charity_wallet</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>charity_memo</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>)</w:t></w:r></w:p><w:p w14:paraId="75401B61" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="7"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Accounts: same as above + each </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>[</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>i</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">] + </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_vault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>[</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>i</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">] (ATA </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>init</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>).</w:t></w:r></w:p><w:p w14:paraId="376759F1" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="7"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Validations: fee mint &amp; splits as above (no </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> required).</w:t></w:r></w:p><w:p w14:paraId="12F23637" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="7"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Effects:</w:t></w:r></w:p><w:p w14:paraId="71169047" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="7"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Create prize vaults (empty), status=</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>AwaitingFunding</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="09A9EBC2" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>deposit_prize_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>asset</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>prize_index</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (host)</w:t></w:r></w:p><w:p w14:paraId="56C61D9C" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="8"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Accounts:</w:t></w:r></w:p><w:p w14:paraId="096AC2FD" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="8"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>host (signer), room (mut)</w:t></w:r></w:p><w:p w14:paraId="5FC72B2A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="8"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_prize_ata</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_vault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">[index], </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>[index]</w:t></w:r></w:p><w:p w14:paraId="76CFE07E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="8"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>token_program</w:t></w:r><w:proofErr w:type="spellEnd"/></w:p><w:p w14:paraId="1FE433BE" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="8"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Validations:</w:t></w:r></w:p><w:p w14:paraId="10A1BE24" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="8"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_mode</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>=Assets; status in {</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>AwaitingFunding</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>PartiallyFunded</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>}</w:t></w:r></w:p><w:p w14:paraId="280834CF" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="8"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Transfer exact expected amount host → program vault.</w:t></w:r></w:p><w:p w14:paraId="5DDEB8D9" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="8"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Effects:</w:t></w:r></w:p><w:p w14:paraId="446639E5" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="8"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Mark that index funded; set status=Ready when all funded.</w:t></w:r></w:p><w:p w14:paraId="20C7D099" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="8"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Emit </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>PrizeAssetDeposited</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>all</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>funded</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> }</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="2C9A3F39" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>close_joining</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (optional; convenience)</w:t></w:r></w:p><w:p w14:paraId="347825AE" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="9"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Accounts: host (signer), room (mut)</w:t></w:r></w:p><w:p w14:paraId="004A51FE" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="9"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Effects: status=Active if currently Ready; emit </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>JoinClosed</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="3E381F37" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="2FAB1B24"><v:rect id="_x0000_i1126" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="0A1265B0" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>4.3 Player Money In</w:t></w:r></w:p><w:p w14:paraId="7ED3D797" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>join_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>extras_amount</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (player)</w:t></w:r></w:p><w:p w14:paraId="2002C713" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="10"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Accounts:</w:t></w:r></w:p><w:p w14:paraId="259BEA43" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="10"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>player (signer), room (mut)</w:t></w:r></w:p><w:p w14:paraId="6976D551" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="10"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>player_fee_ata</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>treasury_vault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/></w:p><w:p w14:paraId="0EE2817C" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="10"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>token_program</w:t></w:r><w:proofErr w:type="spellEnd"/></w:p><w:p w14:paraId="228E2B98" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="10"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Preconditions:</w:t></w:r></w:p><w:p w14:paraId="432B2CE0" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="10"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Global not paused; room not paused.</w:t></w:r></w:p><w:p w14:paraId="6A65723A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="10"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>status in {Ready, Active}.</w:t></w:r></w:p><w:p w14:paraId="50DC07A4" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="10"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Asset mode: all prize vaults funded.</w:t></w:r></w:p><w:p w14:paraId="241DFFFD" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="10"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Effects:</w:t></w:r></w:p><w:p w14:paraId="2DF2457C" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="10"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Transfer (</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>entry_fee</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> + </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>extras_amount</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">) from player → </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>treasury_vault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="42605ED8" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="10"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> += </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_paid</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">; </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_entry_fees</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> += </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>entry_fee</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">; </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_extras_fees</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> += </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>extras_amount</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">; </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>player_count</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> += 1</w:t></w:r></w:p><w:p w14:paraId="0623522C" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="10"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>If was Ready, flip status=Active.</w:t></w:r></w:p><w:p w14:paraId="14142353" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="10"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Optional: write Receipt </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>entry</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_paid</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>extras_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>paid</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> }</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="639BE99D" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="10"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Emit </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>PlayerJoined</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="6F5E0A4B" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="523D05F9"><v:rect id="_x0000_i1127" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="05BDCC6C" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>4.4 Winners &amp; Payouts</w:t></w:r></w:p><w:p w14:paraId="5D57F15F" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>declare_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>winners</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>, winners: [Option&lt;</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Pubkey</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>&gt;;3])</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (host)</w:t></w:r></w:p><w:p w14:paraId="11D3B4D0" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="11"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Accounts: host (signer), room (mut)</w:t></w:r></w:p><w:p w14:paraId="01CC473D" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="11"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Validations:</w:t></w:r></w:p><w:p w14:paraId="14D5A111" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="11"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Pool mode: number of winners == number of non-zero </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_distribution_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="6290BB9A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="11"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Asset mode: number of winners == number of funded </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>PrizeVaults</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="6579FD27" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="11"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Winners must be unique, must have joined, and cannot be the host.</w:t></w:r></w:p><w:p w14:paraId="13F1A4D3" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="11"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Effects: store </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>winners</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> array; emit </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>WinnersDeclared</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="384CFC75" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>end_room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (host) — </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>atomic payouts + close</w:t></w:r></w:p><w:p w14:paraId="7C7DEB1E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Accounts (depends on mode):</w:t></w:r></w:p><w:p w14:paraId="05B1DD35" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>host (signer), room (mut)</w:t></w:r></w:p><w:p w14:paraId="137FDEBF" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>treasury_vault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (mut)</w:t></w:r></w:p><w:p w14:paraId="2B910A79" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Platform</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>platform_fee_ata</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (for </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>)</w:t></w:r></w:p><w:p w14:paraId="764B8990" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Charity</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_fee_ata</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (for </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">) — </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:i/><w:iCs/></w:rPr><w:t>this is the TGB donation address’s ATA for the fee mint (e.g., USDC)</w:t></w:r></w:p><w:p w14:paraId="4AE94FB3" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="2"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>If charity wallet is a SOL address and fee is USDC, derive/create ATA for that wallet and mint.</w:t></w:r></w:p><w:p w14:paraId="73A35F90" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Host</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_fee_ata</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (if </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_fee_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> &gt; 0)</w:t></w:r></w:p><w:p w14:paraId="5D9619D6" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Winners (pool mode)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: winner ATAs for </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/></w:p><w:p w14:paraId="626A10C4" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Winners (asset mode)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: each </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_vault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>[</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>i</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">] + each winner’s ATA for </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>[</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>i</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>]</w:t></w:r></w:p><w:p w14:paraId="1A1209DE" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>token_program</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>associated_token_program</w:t></w:r><w:proofErr w:type="spellEnd"/></w:p><w:p w14:paraId="41115B3F" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Preconditions:</w:t></w:r></w:p><w:p w14:paraId="51E6524F" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">ended == false; </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>player_count</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> &gt; 0; winners set and valid</w:t></w:r></w:p><w:p w14:paraId="0BF0730D" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Computation:</w:t></w:r></w:p><w:p w14:paraId="227A5EBD" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">platform = </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> * 2000 / 10_000</w:t></w:r></w:p><w:p w14:paraId="4B914829" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">host = </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> * </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_fee_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> / 10_000 (≤ 5%)</w:t></w:r></w:p><w:p w14:paraId="1F8A1C05" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> = (Split mode) </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> * </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> / 10_000</w:t></w:r></w:p><w:p w14:paraId="1061BE77" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">charity = </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> - (platform + host + </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>)</w:t></w:r></w:p><w:p w14:paraId="10D49C1F" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="2"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Assert charity &gt;= </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> * 4000 / 10_000</w:t></w:r></w:p><w:p w14:paraId="47761047" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Transfers:</w:t></w:r></w:p><w:p w14:paraId="175B446B" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">From </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>treasury_vault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>:</w:t></w:r></w:p><w:p w14:paraId="235C816F" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="2"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>platform → PLATFORM_WALLET ATA (fee mint)</w:t></w:r></w:p><w:p w14:paraId="2EDE3A85" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="2"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">charity → </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_wallet</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> ATA (fee mint) </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>(TGB donation address)</w:t></w:r></w:p><w:p w14:paraId="1E77C6D4" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="2"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>host → host ATA (if &gt;0)</w:t></w:r></w:p><w:p w14:paraId="74136391" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Split mode prizes:</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> for each non-zero </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_distribution_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>[</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>i</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>]:</w:t></w:r></w:p><w:p w14:paraId="26DFA67E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="2"/><w:numId w:val="12"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>winner_share</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> = </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> * bps / 10_000; transfer to winner’s ATA (fee mint).</w:t></w:r></w:p><w:p w14:paraId="6D02EA24" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Asset mode prizes:</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> transfer </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_vault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>[</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>i</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">] balance to </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>winners</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>[</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>i</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>].</w:t></w:r></w:p><w:p w14:paraId="23DD5407" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Any dust remainder to charity.</w:t></w:r></w:p><w:p w14:paraId="7CED4836" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Effects:</w:t></w:r></w:p><w:p w14:paraId="35F83E3F" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="12"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Set ended = true; status=Ended; emit </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>RoomEnded</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> and per-transfer PayoutExecuted.</w:t></w:r></w:p><w:p w14:paraId="0F78CFD4" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="0A1B0FC1"><v:rect id="_x0000_i1128" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="28C9C2CC" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>4.5 Cleanup &amp; Recovery</w:t></w:r></w:p><w:p w14:paraId="5F42CA39" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>cleanup_room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:br/><w:t>After ending, close empty prize vaults, optionally close room PDA after a TTL.</w:t></w:r></w:p><w:p w14:paraId="2054DCCD" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>start_recovery</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (admin)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:br/><w:t xml:space="preserve">Set </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>recovery_started_at_slot</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> = </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>current_slot</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="72A7741E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>recover_abandoned_room_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>batch</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>max_players</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>: u16)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (admin)</w:t></w:r><w:r w:rsidRPr="00545D85"><w:br/><w:t>After threshold (~7 days equivalent in slots):</w:t></w:r></w:p><w:p w14:paraId="1D1EA653" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="13"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>For each batch item:</w:t></w:r></w:p><w:p w14:paraId="3BDF88B5" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="13"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Refund </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>90%</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> of each player’s </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_paid</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> from </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>treasury_vault</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> to player ATA.</w:t></w:r></w:p><w:p w14:paraId="098C5755" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="13"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Send </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>10%</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> to PLATFORM_WALLET ATA.</w:t></w:r></w:p><w:p w14:paraId="67FF079B" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="13"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>When no players remain:</w:t></w:r></w:p><w:p w14:paraId="3DD3BA32" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="13"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>If asset mode, return prize vaults to host.</w:t></w:r></w:p><w:p w14:paraId="7E9AF7C9" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="13"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Mark ended and status=Ended.</w:t></w:r></w:p><w:p w14:paraId="1A20E23E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="13"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Emit </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>RecoveryBatchProcessed</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="7A9420B0" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="4B3820FA"><v:rect id="_x0000_i1129" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="1FB6FAAC" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>5) What Frontend Sends vs. What Program Calculates</w:t></w:r></w:p><w:p w14:paraId="49BB6057" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Frontend → Program (via Anchor clients)</w:t></w:r></w:p><w:p w14:paraId="346BCADD" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="14"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>At room create (pool):</w:t></w:r></w:p><w:p w14:paraId="26525149" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="14"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: string</w:t></w:r></w:p><w:p w14:paraId="3F051E8F" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="14"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>Pubkey</w:t></w:r><w:proofErr w:type="spellEnd"/></w:p><w:p w14:paraId="427220E7" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="14"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>entry_fee</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: u64</w:t></w:r></w:p><w:p w14:paraId="2F65064D" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="14"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_fee_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: u16 (</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>0..</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>500)</w:t></w:r></w:p><w:p w14:paraId="51AF7D48" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="14"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: u16 (so host + prize ≤ 4000)</w:t></w:r></w:p><w:p w14:paraId="54660DAB" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="14"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_distribution_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: [u16;3] (sum=10000)</w:t></w:r></w:p><w:p w14:paraId="6A274324" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="14"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_wallet</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>Pubkey</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (from backend/TGB)</w:t></w:r></w:p><w:p w14:paraId="7F47BD1A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="14"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_memo</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: string (optional)</w:t></w:r></w:p><w:p w14:paraId="7E2E8667" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="14"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>At room create (asset):</w:t></w:r></w:p><w:p w14:paraId="59E71647" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="14"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Same basics + </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>expected_prizes</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: [(mint: </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>Pubkey</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>, amount: u64); up to 3]</w:t></w:r></w:p><w:p w14:paraId="114E7B30" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="14"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Deposit prize asset (asset mode):</w:t></w:r></w:p><w:p w14:paraId="0AD8884E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="14"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: string, index: 0|1|2</w:t></w:r></w:p><w:p w14:paraId="2FF1BDBA" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="14"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Join:</w:t></w:r></w:p><w:p w14:paraId="6808548C" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="14"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: string, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>extras_amount</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: u64 (program splits entry vs extras; extras semantics are </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>off-chain</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>)</w:t></w:r></w:p><w:p w14:paraId="22A05FBE" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="14"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Declare winners:</w:t></w:r></w:p><w:p w14:paraId="7D85D08A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="14"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: string, winners: [Option&lt;</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>Pubkey</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>&gt;;3]</w:t></w:r></w:p><w:p w14:paraId="119E3A24" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="14"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>End room:</w:t></w:r></w:p><w:p w14:paraId="7E29423A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="14"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>: string (all payout accounts are provided in the accounts list)</w:t></w:r></w:p><w:p w14:paraId="0FDEB265" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Program → Calculations (on-chain)</w:t></w:r></w:p><w:p w14:paraId="6D6E81F7" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="15"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Validations (allowlist, splits, charity minimum, etc.)</w:t></w:r></w:p><w:p w14:paraId="437CC030" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="15"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Totals: platform, host, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (split mode), charity = remainder</w:t></w:r></w:p><w:p w14:paraId="23E5DB2A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="15"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Prize shares per winner (split mode)</w:t></w:r></w:p><w:p w14:paraId="4415990C" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="4355E3B2"><v:rect id="_x0000_i1130" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="0B9D4372" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>6) Backend — The Giving Block (TGB) Charity Wallet Resolution</w:t></w:r></w:p><w:p w14:paraId="2B3116FA" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Goal:</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> Before creating a room, resolve a </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Solana donation address</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> for the chosen charity and the chosen </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>fee asset</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (e.g., USDC). Store in DB and pass to frontend to include in </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>init_pool_room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> / </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>init_asset_room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="154B2EE5" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Suggested flow (pseudo)</w:t></w:r></w:p><w:p w14:paraId="0052B1E8" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="16"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Admin selects charity</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> in </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>FundRaisely</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (UI).</w:t></w:r></w:p><w:p w14:paraId="7F7FB2EC" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="16"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Backend calls TGB Public/Partner API to:</w:t></w:r></w:p><w:p w14:paraId="60FFF6EE" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="16"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Look up organization by slug/id.</w:t></w:r></w:p><w:p w14:paraId="56B0DF9A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="16"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Initiate or fetch a </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>donation object</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> for </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Solana USDC</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (or SOL if you choose </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>wSOL</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>).</w:t></w:r></w:p><w:p w14:paraId="5A7EFA4D" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="16"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Extract </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>deposit address</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (a Solana address owned by TGB for that org &amp; asset).</w:t></w:r></w:p><w:p w14:paraId="54553044" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="16"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Persist:</w:t></w:r></w:p><w:p w14:paraId="632987CD" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="16"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_org_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_name</w:t></w:r><w:proofErr w:type="spellEnd"/></w:p><w:p w14:paraId="4B4BC147" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="16"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_wallet</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (Solana address)</w:t></w:r></w:p><w:p w14:paraId="344299A9" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="16"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_asset</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (e.g., USDC mint)</w:t></w:r></w:p><w:p w14:paraId="7A0DAC34" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="16"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Optional </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_memo</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (e.g., our room id / org ref for reconciliation).</w:t></w:r></w:p><w:p w14:paraId="79942F7D" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="16"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Provide these to the frontend room creation step. Frontend passes them into the on-chain </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>init</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>_*_room instruction.</w:t></w:r></w:p><w:p w14:paraId="44EEBE21" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t>Notes:</w:t></w:r></w:p><w:p w14:paraId="1600CB3D" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="17"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Ensure the charity address you get from TGB </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>matches the asset/mint</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> you’ll use for the room. If fee mint = USDC, store the </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>same</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> USDC donation address context.</w:t></w:r></w:p><w:p w14:paraId="37818F12" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="17"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>For SOL/</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>wSOL</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">: either use </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>wSOL</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> throughout or keep SOL separate (we recommend </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>wSOL</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> for a single code path).</w:t></w:r></w:p><w:p w14:paraId="005A69F4" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Backend responsibilities checklist</w:t></w:r></w:p><w:p w14:paraId="279F62E6" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="18"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>API client for TGB (keys in server env).</w:t></w:r></w:p><w:p w14:paraId="28A1E04F" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="18"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Validate charity supports the fee asset on Solana; otherwise block room creation.</w:t></w:r></w:p><w:p w14:paraId="6526F4E3" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="18"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Provide a small </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>admin UI</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> to fetch/refresh/store TGB addresses per charity &amp; asset.</w:t></w:r></w:p><w:p w14:paraId="228D9F87" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="18"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Store </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_wallet</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> &amp; </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_memo</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> against the room record.</w:t></w:r></w:p><w:p w14:paraId="2E2DC992" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="18"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>(Optional) TGB webhook receiver to reconcile payouts for audit receipts.</w:t></w:r></w:p><w:p w14:paraId="2D9AC37A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="510D0B70"><v:rect id="_x0000_i1131" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="2549E634" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>7) Events &amp; Telemetry</w:t></w:r></w:p><w:p w14:paraId="1F112C4A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t>Emit these Anchor events for the socket layer:</w:t></w:r></w:p><w:p w14:paraId="70DCCCBA" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="19"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>RoomCreated</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>entry_fee</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>mode }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="61A6DE19" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="19"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>PrizeAssetDeposited</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, index, mint, amount, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>all_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>funded</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="59A35FE3" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="19"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>PlayerJoined</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, player, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>paid</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="6BA27C80" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="19"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>JoinClosed</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="538F3010" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="19"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>WinnersDeclared</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>count }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="3733AF81" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="19"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>RoomEnded</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, platform, charity, host, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="54E0AB99" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="19"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">PayoutExecuted </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, to, mint, </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>amount }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="4A23EE37" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="19"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>RefundIssued</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, player, </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>amount }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="5F768174" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="19"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>RecoveryStarted</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>slot }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="6051384C" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="19"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>RecoveryBatchProcessed</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, players, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prizes_returned</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>complete }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="26E9B0CD" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="19"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>RoomClosed</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">{ </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>room</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>id</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> }</w:t></w:r><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="6E305F3E" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="7C7CB77A"><v:rect id="_x0000_i1132" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="50C2C542" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>8) Security &amp; Invariants</w:t></w:r></w:p><w:p w14:paraId="5B165901" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="20"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Program owns vault ATAs; only program can move funds.</w:t></w:r></w:p><w:p w14:paraId="03616803" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="20"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>end_room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> is </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>idempotent</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> via ended flag; re-entry blocked.</w:t></w:r></w:p><w:p w14:paraId="4ADFFD1A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="20"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Validations:</w:t></w:r></w:p><w:p w14:paraId="0DFDA943" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="20"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Pool mode: sum(</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_distribution_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>) == 10000.</w:t></w:r></w:p><w:p w14:paraId="57532882" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="20"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_fee_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> &lt;= 500.</w:t></w:r></w:p><w:p w14:paraId="2C45F3C5" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="20"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_fee_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> + </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> &lt;= 4000.</w:t></w:r></w:p><w:p w14:paraId="12A59FAA" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="20"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Charity remainder </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>≥ 40%</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> of total pool.</w:t></w:r></w:p><w:p w14:paraId="76EB0117" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="20"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Asset mode: </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>all prizes escrowed</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> before any join allowed.</w:t></w:r></w:p><w:p w14:paraId="3095C25F" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="20"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Winners: unique, must have joined, and </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>not</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> the host.</w:t></w:r></w:p><w:p w14:paraId="7C4E8974" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="20"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Checked arithmetic on all </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>amounts;</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> abort on overflow.</w:t></w:r></w:p><w:p w14:paraId="6BFC2A43" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="5797C3D2"><v:rect id="_x0000_i1133" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="43EE47BF" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>9) Testing Plan (high-value cases)</w:t></w:r></w:p><w:p w14:paraId="27434A86" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="21"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Pool Room happy path</w:t></w:r></w:p><w:p w14:paraId="5B8EABE1" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="21"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Create → Join </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>xN</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (with/without extras) → Declare winners (1/2/3) → End → Verify transfers:</w:t></w:r></w:p><w:p w14:paraId="0B64AF3B" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="2"/><w:numId w:val="21"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>20% platform, ≥40% charity, ≤5% host, prize pool distribution sums, dust to charity.</w:t></w:r></w:p><w:p w14:paraId="30A331C4" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="21"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Asset Room happy path</w:t></w:r></w:p><w:p w14:paraId="7FB9030B" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="21"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Create → Fund all prize vaults → Join </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>xN</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> → Declare winners (3 or fewer) → End → Verify prize vaults drained to winners and fees to platform/charity/host.</w:t></w:r></w:p><w:p w14:paraId="77B6AAD7" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="21"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Validation failures</w:t></w:r></w:p><w:p w14:paraId="35C4DF09" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="21"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Bad splits (sum wrong, charity &lt; 40%), winner not a player, winner = host, un-funded asset vaults, non-allowlisted fee mint, join before Ready.</w:t></w:r></w:p><w:p w14:paraId="5CAD2985" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="21"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Recovery</w:t></w:r></w:p><w:p w14:paraId="7A1EB791" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="21"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Start recovery → too early → after threshold: batch refunds 90% to players, 10% platform, return prize assets to host, mark ended.</w:t></w:r></w:p><w:p w14:paraId="0775373B" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="21"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Edge amounts</w:t></w:r></w:p><w:p w14:paraId="36D48828" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="21"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Tiny dust after integer division; confirm it routes to charity.</w:t></w:r></w:p><w:p w14:paraId="12784971" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="74403CE8"><v:rect id="_x0000_i1134" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="2BA61E89" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>10) Deliverables &amp; Interfaces</w:t></w:r></w:p><w:p w14:paraId="1EEE473C" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="22"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Anchor program</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> repo with:</w:t></w:r></w:p><w:p w14:paraId="362F9DFE" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="22"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>idl.json</w:t></w:r><w:proofErr w:type="spellEnd"/><w:proofErr w:type="gramEnd"/></w:p><w:p w14:paraId="5BCCE0E7" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="22"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Instruction handlers (as above)</w:t></w:r></w:p><w:p w14:paraId="5DDCF0A2" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="22"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>#[account] structs &amp; #[</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>derive(</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>Accounts)] per instruction</w:t></w:r></w:p><w:p w14:paraId="00085437" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="22"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Events</w:t></w:r></w:p><w:p w14:paraId="5A9381E5" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="22"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Unit tests for math &amp; flows (see §9)</w:t></w:r></w:p><w:p w14:paraId="67EB05B5" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="22"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Backend</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t>:</w:t></w:r></w:p><w:p w14:paraId="3E46DE39" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="22"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>TGB client (get charity donation address for Solana + asset)</w:t></w:r></w:p><w:p w14:paraId="3FC81902" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="22"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Admin endpoints to store </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_wallet</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> &amp; </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_memo</w:t></w:r><w:proofErr w:type="spellEnd"/></w:p><w:p w14:paraId="7A743591" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="22"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Optionally, webhook handler for payout confirmations</w:t></w:r></w:p><w:p w14:paraId="573805B1" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="22"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Config</w:t></w:r><w:r w:rsidRPr="00545D85"><w:t>:</w:t></w:r></w:p><w:p w14:paraId="1B3F479F" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="22"/></w:numPr></w:pPr><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>.env</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> for PLATFORM_WALLET (if not hard-coded) and TGB API keys</w:t></w:r></w:p><w:p w14:paraId="65AB5CF3" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="22"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Fee mints allowlist (USDC first)</w:t></w:r></w:p><w:p w14:paraId="7A19CD56" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="5F6D8684"><v:rect id="_x0000_i1135" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="4AE74E22" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>11) Frontend Call Map (unchanged names)</w:t></w:r></w:p><w:p w14:paraId="26AD4BCA" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="23"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>init_pool_room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>(...)</w:t></w:r></w:p><w:p w14:paraId="61414B43" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="23"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>init_asset_room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>(...)</w:t></w:r></w:p><w:p w14:paraId="20F1431A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="23"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>deposit_prize_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>asset</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>roomId</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>, index)</w:t></w:r></w:p><w:p w14:paraId="62A7F64A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="23"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>close_joining</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>roomId</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">) </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:i/><w:iCs/></w:rPr><w:t>(optional)</w:t></w:r></w:p><w:p w14:paraId="60A05769" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="23"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>join_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>roomId</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>extrasAmount</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>)</w:t></w:r></w:p><w:p w14:paraId="024651E2" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="23"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>declare_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>winners</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>roomId</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>winners[</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>])</w:t></w:r></w:p><w:p w14:paraId="5EBFEC71" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="23"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>end_room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>roomId</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>)</w:t></w:r></w:p><w:p w14:paraId="03DEA4BE" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="23"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>cleanup_room</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>roomId</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>)</w:t></w:r></w:p><w:p w14:paraId="0F62B08B" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="23"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Admin: initialize, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>add_approved_token</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>remove_approved_token</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, pause, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>unpause</w:t></w:r><w:proofErr w:type="spellEnd"/></w:p><w:p w14:paraId="581B7BB8" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="23"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Admin recovery: </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>start_recovery</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>roomId</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">), </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>recover_abandoned_room_</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>batch</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>(</w:t></w:r><w:proofErr w:type="spellStart"/><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>roomId</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">, </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>maxPlayers</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>)</w:t></w:r></w:p><w:p w14:paraId="316616AA" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Inputs the FE expects from backend before room creation:</w:t></w:r><w:r w:rsidRPr="00545D85"><w:br/></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_wallet</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (Solana address from TGB), </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>charity_memo</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> (string), and chosen </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>fee_mint</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>.</w:t></w:r></w:p><w:p w14:paraId="348042E9" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:pict w14:anchorId="07CE6813"><v:rect id="_x0000_i1136" style="width:0;height:1.5pt" o:hralign="center" o:hrstd="t" o:hr="t" fillcolor="#a0a0a0" stroked="f"/></w:pict></w:r></w:p><w:p w14:paraId="3793C59A" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:rPr><w:b/><w:bCs/></w:rPr></w:pPr><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>12) Quick Math Reference (bp = /10_000)</w:t></w:r></w:p><w:p w14:paraId="3B10806F" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">For </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>:</w:t></w:r></w:p><w:p w14:paraId="031BF3DA" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="24"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">platform = </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> * 2000 / 10_000</w:t></w:r></w:p><w:p w14:paraId="62669748" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="24"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">host = </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> * </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>host_fee_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> / 10_000 (</w:t></w:r><w:proofErr w:type="gramStart"/><w:r w:rsidRPr="00545D85"><w:t>0..</w:t></w:r><w:proofErr w:type="gramEnd"/><w:r w:rsidRPr="00545D85"><w:t>500)</w:t></w:r></w:p><w:p w14:paraId="14C6A1FE" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="24"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> = </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> * </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> / 10_000 (Split mode only)</w:t></w:r></w:p><w:p w14:paraId="234148EB" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="24"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">charity = </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> - (platform + host + </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>)</w:t></w:r></w:p><w:p w14:paraId="1A972954" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="24"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Assert charity &gt;= </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>total_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> * 4000 / 10_000</w:t></w:r></w:p><w:p w14:paraId="341939B5" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="24"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t>Split mode per-winner:</w:t></w:r></w:p><w:p w14:paraId="46C7A574" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="24"/></w:numPr></w:pPr><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>winner_i</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> = </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_pool</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve"> * </w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>prize_distribution_bps</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>[</w:t></w:r><w:proofErr w:type="spellStart"/><w:r w:rsidRPr="00545D85"><w:t>i</w:t></w:r><w:proofErr w:type="spellEnd"/><w:r w:rsidRPr="00545D85"><w:t>] / 10_000</w:t></w:r></w:p><w:p w14:paraId="74231EAA" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="00545D85" w:rsidRDefault="00545D85" w:rsidP="00545D85"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="24"/></w:numPr></w:pPr><w:r w:rsidRPr="00545D85"><w:t xml:space="preserve">Dust remainder → </w:t></w:r><w:r w:rsidRPr="00545D85"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>charity</w:t></w:r></w:p><w:p w14:paraId="5BD09382" w14:textId="77777777" w:rsidR="00545D85" w:rsidRPr="008C43EC" w:rsidRDefault="00545D85"/><w:sectPr w:rsidR="00545D85" w:rsidRPr="008C43EC"><w:pgSz w:w="11906" w:h="16838"/><w:pgMar w:top="1440" w:right="1440" w:bottom="1440" w:left="1440" w:header="708" w:footer="708" w:gutter="0"/><w:cols w:space="708"/><w:docGrid w:linePitch="360"/></w:sectPr></w:body></w:document>